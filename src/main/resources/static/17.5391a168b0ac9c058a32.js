(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"9jm2":function(l,n,o){"use strict";o.r(n);var e=o("CcnG"),u=o("5StZ"),t=o("S5Ai"),i=o("vZ6X"),c=o("GLby"),r=function(){function l(l,n,o,e){this.collectionsService=l,this.booksService=n,this.router=o,this.tokenStorage=e,this.userInput="",this._collections=[],this._booksCollectionsMap=new Map}return Object.defineProperty(l.prototype,"collections",{get:function(){return this._collections},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"booksCollectionsMap",{get:function(){return this._booksCollectionsMap},enumerable:!0,configurable:!0}),l.prototype.ngOnInit=function(){this.retrieveCollections()},l.prototype.retrieveCollections=function(){var l=this;this.collectionsService.getCollections().subscribe(function(n){console.log(n),l._collections=n,l.booksService.getBooks().subscribe(function(n){l.initMap(n)})},function(l){return console.log(l)})},l.prototype.initMap=function(l){var n=this;this._booksCollectionsMap=new Map,this.collections.forEach(function(o){if(null!=o.booksIds){var e=[];l.forEach(function(l){o.booksIds.includes(l.id)&&e.push(l)}),n._booksCollectionsMap.set(o.id,e)}})},l.prototype.createNewCollection=function(){var l=this;if(""!=this.userInput){var n=new u.a(this.userInput,+this.tokenStorage.getUserId());this.collectionsService.saveCollection(n).subscribe(function(){return l.retrieveCollections()},function(l){return console.log(l)})}},l}(),b=function(){function l(){}return l.forRoot=function(){return{ngModule:l,providers:[t.a]}},l}(),s=o("pMnS"),a=o("oBZk"),p=o("ZZ/e"),h=o("f68i"),d=o("h9v0"),g=o("ZYCi"),f=o("zQnm"),k=o("gIcY"),m=o("Ip0R"),C=e.nb({encapsulation:0,styles:[[".create-input[_ngcontent-%COMP%]{--background:white;display:inline-block;margin-right:1em;min-width:50%;max-width:60%}.create-col[_ngcontent-%COMP%]{display:flex;justify-content:center}"]],data:{}});function v(l){return e.Hb(0,[(l()(),e.pb(0,0,null,null,3,"ion-col",[["size-md","6"],["size-xs","12"]],null,null,null,a.eb,a.l)),e.ob(1,49152,null,0,p.t,[e.h,e.k],null,null),(l()(),e.pb(2,0,null,0,1,"app-display-book-list",[["itemMode","collection"]],null,[[null,"refreshParent"]],function(l,n,o){var e=!0;return"refreshParent"===n&&(e=!1!==l.component.retrieveCollections()&&e),e},h.b,h.a)),e.ob(3,114688,null,0,d.a,[g.m,t.a,f.a,p.Fb,p.b],{books:[0,"books"],collection:[1,"collection"],itemMode:[2,"itemMode"]},{refreshParent:"refreshParent"})],function(l,n){l(n,3,0,n.component.booksCollectionsMap.get(n.context.$implicit.id),n.context.$implicit,"collection")},null)}function w(l){return e.Hb(0,[(l()(),e.pb(0,0,null,null,33,"ion-content",[],null,null,null,a.fb,a.m)),e.ob(1,49152,null,0,p.u,[e.h,e.k],null,null),(l()(),e.pb(2,0,null,0,31,"ion-grid",[],null,null,null,a.jb,a.q)),e.ob(3,49152,null,0,p.A,[e.h,e.k],null,null),(l()(),e.pb(4,0,null,0,19,"ion-row",[["justify-content-center",""]],null,null,null,a.xb,a.E)),e.ob(5,49152,null,0,p.ib,[e.h,e.k],null,null),(l()(),e.pb(6,0,null,0,17,"ion-col",[["class","create-col"],["size-lg","8"]],null,null,null,a.eb,a.l)),e.ob(7,49152,null,0,p.t,[e.h,e.k],null,null),(l()(),e.pb(8,0,null,0,8,"ion-item",[["class","create-input"]],null,null,null,a.ob,a.v)),e.ob(9,49152,null,0,p.H,[e.h,e.k],null,null),(l()(),e.pb(10,0,null,0,6,"ion-input",[["placeholder","Collection name"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(l,n,o){var u=!0,t=l.component;return"ionBlur"===n&&(u=!1!==e.yb(l,11)._handleBlurEvent()&&u),"ionChange"===n&&(u=!1!==e.yb(l,11)._handleInputEvent(o.target.value)&&u),"ngModelChange"===n&&(u=!1!==(t.userInput=o)&&u),u},a.nb,a.u)),e.ob(11,16384,null,0,p.Nb,[e.k],null,null),e.Cb(1024,null,k.g,function(l){return[l]},[p.Nb]),e.ob(13,671744,null,0,k.k,[[8,null],[8,null],[8,null],[6,k.g]],{model:[0,"model"]},{update:"ngModelChange"}),e.Cb(2048,null,k.h,null,[k.k]),e.ob(15,16384,null,0,k.i,[[4,k.h]],null,null),e.ob(16,49152,null,0,p.G,[e.h,e.k],{placeholder:[0,"placeholder"]},null),(l()(),e.pb(17,0,null,0,2,"ion-button",[["hidden-until-md",""],["size","medium"]],null,[[null,"click"]],function(l,n,o){var e=!0;return"click"===n&&(e=!1!==l.component.createNewCollection()&&e),e},a.V,a.c)),e.ob(18,49152,null,0,p.k,[e.h,e.k],{size:[0,"size"]},null),(l()(),e.Fb(-1,0,[" Create new collection "])),(l()(),e.pb(20,0,null,0,3,"ion-button",[["hidden-from-md",""],["size","medium"]],null,[[null,"click"]],function(l,n,o){var e=!0;return"click"===n&&(e=!1!==l.component.createNewCollection()&&e),e},a.V,a.c)),e.ob(21,49152,null,0,p.k,[e.h,e.k],{size:[0,"size"]},null),(l()(),e.pb(22,0,null,0,1,"ion-icon",[["name","add"],["slot","icon-only"]],null,null,null,a.lb,a.s)),e.ob(23,49152,null,0,p.C,[e.h,e.k],{name:[0,"name"]},null),(l()(),e.pb(24,0,null,0,9,"ion-row",[["justify-content-center",""]],null,null,null,a.xb,a.E)),e.ob(25,49152,null,0,p.ib,[e.h,e.k],null,null),(l()(),e.pb(26,0,null,0,7,"ion-col",[["size-xl","10"]],null,null,null,a.eb,a.l)),e.ob(27,49152,null,0,p.t,[e.h,e.k],null,null),(l()(),e.pb(28,0,null,0,5,"ion-grid",[],null,null,null,a.jb,a.q)),e.ob(29,49152,null,0,p.A,[e.h,e.k],null,null),(l()(),e.pb(30,0,null,0,3,"ion-row",[],null,null,null,a.xb,a.E)),e.ob(31,49152,null,0,p.ib,[e.h,e.k],null,null),(l()(),e.gb(16777216,null,0,1,null,v)),e.ob(33,278528,null,0,m.i,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var o=n.component;l(n,13,0,o.userInput),l(n,16,0,"Collection name"),l(n,18,0,"medium"),l(n,21,0,"medium"),l(n,23,0,"add"),l(n,33,0,o.collections)},function(l,n){l(n,10,0,e.yb(n,15).ngClassUntouched,e.yb(n,15).ngClassTouched,e.yb(n,15).ngClassPristine,e.yb(n,15).ngClassDirty,e.yb(n,15).ngClassValid,e.yb(n,15).ngClassInvalid,e.yb(n,15).ngClassPending)})}function y(l){return e.Hb(0,[(l()(),e.pb(0,0,null,null,1,"app-collections",[],null,null,null,w,C)),e.ob(1,114688,null,0,r,[t.a,i.a,g.m,c.a],null,null)],function(l,n){l(n,1,0)},null)}var M=e.lb("app-collections",r,y,{},{},[]),I=o("PCNd");o.d(n,"CollectionsPageModuleNgFactory",function(){return j});var j=e.mb(b,[],function(l){return e.vb([e.wb(512,e.j,e.bb,[[8,[s.a,M]],[3,e.j],e.x]),e.wb(4608,m.l,m.k,[e.u,[2,m.s]]),e.wb(4608,k.q,k.q,[]),e.wb(4608,p.c,p.c,[e.z,e.g]),e.wb(4608,p.Fb,p.Fb,[p.c,e.j,e.q,m.c]),e.wb(4608,p.Jb,p.Jb,[p.c,e.j,e.q,m.c]),e.wb(1073742336,m.b,m.b,[]),e.wb(1073742336,k.o,k.o,[]),e.wb(1073742336,k.e,k.e,[]),e.wb(1073742336,p.Db,p.Db,[]),e.wb(1073742336,g.p,g.p,[[2,g.v],[2,g.m]]),e.wb(1073742336,I.a,I.a,[]),e.wb(1073742336,b,b,[]),e.wb(1024,g.k,function(){return[[{path:"",component:r}]]},[])])})}}]);