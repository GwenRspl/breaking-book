(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{Gc5z:function(l,n,u){"use strict";u.r(n);var t=u("CcnG"),e=u("ZZ/e"),o=u("gIcY"),i=u("t/Na"),r=u("AytR").a+"/users/",a={headers:new i.g({"Content-Type":"application/json"}),responseType:"text"},s=function(){function l(l){this.httpClient=l}return l.prototype.getUser=function(l){return this.httpClient.get(r+l)},l.prototype.editAccount=function(l,n){return this.httpClient.put(r+n,l,a)},l.ngInjectableDef=t.S({factory:function(){return new l(t.W(i.c))},token:l,providedIn:"root"}),l}(),b=function(){return function(l,n,u){this.email=l,this.password=n,this.avatar=u}}(),c=function(){function l(l,n,u){this.formBuilder=l,this.accountService=n,this.modalCtrl=u,this.submitted=!1}return Object.defineProperty(l.prototype,"f",{get:function(){return this.editForm.controls},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"userId",{get:function(){return this._userId},enumerable:!0,configurable:!0}),l.prototype.ngOnInit=function(){this.initEditForm(),this.retrieveUserId()},l.prototype.retrieveUserId=function(){this._userId=this.user.id},l.prototype.initEditForm=function(){this.editForm=this.formBuilder.group({email:[this.user.email,[o.n.required,o.n.email]],avatar:[this.user.avatar]})},l.prototype.editAccount=function(){var l=this;if(this.submitted=!0,this.editForm.invalid)console.log("invalid form");else{var n=new b(this.editForm.value.email,null,this.editForm.value.avatar);this.accountService.editAccount(n,this.userId).subscribe(function(n){l.modalCtrl.dismiss(null,"success")},function(l){console.log(l)})}},l.prototype.cancel=function(){this.modalCtrl.dismiss()},l}(),p=u("GLby"),f=function(){function l(l,n,u){this.modalCtrl=l,this.accountService=n,this.tokenStorageService=u,this._defaultAvatar="../../assets/default_avatar.png",this._finishedLoading=!1}return Object.defineProperty(l.prototype,"user",{get:function(){return this._user},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"defaultAvatar",{get:function(){return this._defaultAvatar},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"finishedLoading",{get:function(){return this._finishedLoading},enumerable:!0,configurable:!0}),l.prototype.ngOnInit=function(){this.retrieveUser()},l.prototype.retrieveUser=function(){var l=this;this.accountService.getUser(+this.tokenStorageService.getUserId()).subscribe(function(n){l._user=n,l._finishedLoading=!0},function(l){console.log(l)})},l.prototype.editAccount=function(){var l=this;this.modalCtrl.create({component:c,componentProps:{user:this.user},cssClass:"edit-account-modal"}).then(function(l){return l.present(),l.onDidDismiss()}).then(function(n){"success"===n.role&&l.retrieveUser()})},l}(),d=function(){return function(){}}(),g=u("pMnS"),m=u("oBZk"),h=u("Ip0R"),v=t.nb({encapsulation:0,styles:[[".item-spinner[_ngcontent-%COMP%]{width:9em}"]],data:{}});function y(l){return t.Hb(0,[(l()(),t.pb(0,0,null,null,10,"ion-grid",[],null,null,null,m.jb,m.q)),t.ob(1,49152,null,0,e.A,[t.h,t.k],null,null),(l()(),t.pb(2,0,null,0,8,"ion-row",[["align-items-center",""],["justify-content-center",""],["padding-top",""]],null,null,null,m.xb,m.E)),t.ob(3,49152,null,0,e.ib,[t.h,t.k],null,null),(l()(),t.pb(4,0,null,0,6,"ion-item",[["class","item-spinner center-content-vertically"],["lines","none"],["text-center",""]],null,null,null,m.ob,m.v)),t.ob(5,49152,null,0,e.H,[t.h,t.k],{lines:[0,"lines"]},null),(l()(),t.pb(6,0,null,0,2,"ion-label",[],null,null,null,m.pb,m.w)),t.ob(7,49152,null,0,e.N,[t.h,t.k],null,null),(l()(),t.Fb(-1,0,["Loading"])),(l()(),t.pb(9,0,null,0,1,"ion-spinner",[],null,null,null,m.Fb,m.M)),t.ob(10,49152,null,0,e.rb,[t.h,t.k],null,null)],function(l,n){l(n,5,0,"none")},null)}function k(l){return t.Hb(0,[(l()(),t.pb(0,0,null,null,0,"img",[["alt","avatar"]],[[8,"src",4]],null,null,null,null))],null,function(l,n){l(n,0,0,n.component.user.avatar)})}function C(l){return t.Hb(0,[(l()(),t.pb(0,0,null,null,0,"img",[["alt","avatar"]],[[8,"src",4]],null,null,null,null))],null,function(l,n){l(n,0,0,n.component.defaultAvatar)})}function w(l){return t.Hb(0,[(l()(),t.pb(0,0,null,null,28,"ion-grid",[],null,null,null,m.jb,m.q)),t.ob(1,49152,null,0,e.A,[t.h,t.k],null,null),(l()(),t.pb(2,0,null,0,19,"ion-row",[["class","account-info"]],null,null,null,m.xb,m.E)),t.ob(3,49152,null,0,e.ib,[t.h,t.k],null,null),(l()(),t.pb(4,0,null,0,7,"ion-col",[["offset-md","3"],["offset-sm","3"],["offset-xl","4"],["size-md","2"],["size-sm","2"],["size-xl","1"],["size-xs","5"]],null,null,null,m.eb,m.l)),t.ob(5,49152,null,0,e.t,[t.h,t.k],null,null),(l()(),t.pb(6,0,null,0,5,"ion-avatar",[["class","ion-float-right"]],null,null,null,m.U,m.b)),t.ob(7,49152,null,0,e.g,[t.h,t.k],null,null),(l()(),t.gb(16777216,null,0,1,null,k)),t.ob(9,16384,null,0,h.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.gb(16777216,null,0,1,null,C)),t.ob(11,16384,null,0,h.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.pb(12,0,null,0,9,"ion-col",[["size-md","4"],["size-sm","4"],["size-xl","2"],["size-xs","7"]],null,null,null,m.eb,m.l)),t.ob(13,49152,null,0,e.t,[t.h,t.k],null,null),(l()(),t.pb(14,0,null,0,7,"ion-item",[["lines","none"]],null,null,null,m.ob,m.v)),t.ob(15,49152,null,0,e.H,[t.h,t.k],{lines:[0,"lines"]},null),(l()(),t.pb(16,0,null,0,5,"ion-label",[],null,null,null,m.pb,m.w)),t.ob(17,49152,null,0,e.N,[t.h,t.k],null,null),(l()(),t.pb(18,0,null,0,1,"h2",[],null,null,null,null,null)),(l()(),t.Fb(19,null,[" "," "])),(l()(),t.pb(20,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),t.Fb(21,null,[" "," "])),(l()(),t.pb(22,0,null,0,6,"ion-row",[],null,null,null,m.xb,m.E)),t.ob(23,49152,null,0,e.ib,[t.h,t.k],null,null),(l()(),t.pb(24,0,null,0,4,"ion-col",[["offset-md","4"],["offset-sm","5"],["offset-xl","5"],["offset-xs","5"],["size-md","4"],["size-sm","4"],["size-xl","2"],["size-xs","7"]],null,null,null,m.eb,m.l)),t.ob(25,49152,null,0,e.t,[t.h,t.k],null,null),(l()(),t.pb(26,0,null,0,2,"ion-button",[["class","ion-float-right"]],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.editAccount()&&t),t},m.V,m.c)),t.ob(27,49152,null,0,e.k,[t.h,t.k],null,null),(l()(),t.Fb(-1,0,[" Edit account "]))],function(l,n){var u=n.component;l(n,9,0,null!=u.user.avatar&&""!=u.user.avatar),l(n,11,0,null==u.user.avatar||""==u.user.avatar),l(n,15,0,"none")},function(l,n){var u=n.component;l(n,19,0,u.user.username),l(n,21,0,u.user.email)})}function I(l){return t.Hb(0,[(l()(),t.pb(0,0,null,null,6,"ion-content",[],null,null,null,m.fb,m.m)),t.ob(1,49152,null,0,e.u,[t.h,t.k],null,null),(l()(),t.gb(16777216,null,0,1,null,y)),t.ob(3,16384,null,0,h.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.pb(4,0,null,0,2,"div",[["class","center-content-vertically"]],null,null,null,null,null)),(l()(),t.gb(16777216,null,null,1,null,w)),t.ob(6,16384,null,0,h.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,3,0,!u.finishedLoading),l(n,6,0,u.finishedLoading)},null)}function F(l){return t.Hb(0,[(l()(),t.pb(0,0,null,null,1,"app-account",[],null,null,null,I,v)),t.ob(1,114688,null,0,f,[e.Fb,s,p.a],null,null)],function(l,n){l(n,1,0)},null)}var j=t.lb("app-account",f,F,{},{},[]),x=t.nb({encapsulation:0,styles:[[".form-error-message-modal[_ngcontent-%COMP%]{font-size:.7em}"]],data:{}});function O(l){return t.Hb(0,[(l()(),t.pb(0,0,null,null,1,"p",[["class","form-error-message-modal"]],null,null,null,null,null)),(l()(),t.Fb(-1,null,["This email is invalid."]))],null,null)}function A(l){return t.Hb(0,[(l()(),t.pb(0,0,null,null,1,"p",[["class","form-error-message-modal"]],null,null,null,null,null)),(l()(),t.Fb(-1,null,["This field is required."]))],null,null)}function H(l){return t.Hb(0,[(l()(),t.pb(0,0,null,null,5,"ion-text",[["color","danger"]],null,null,null,m.Gb,m.N)),t.ob(1,49152,null,0,e.wb,[t.h,t.k],{color:[0,"color"]},null),(l()(),t.gb(16777216,null,0,1,null,O)),t.ob(3,16384,null,0,h.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.gb(16777216,null,0,1,null,A)),t.ob(5,16384,null,0,h.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,1,0,"danger"),l(n,3,0,u.f.email.errors.email),l(n,5,0,u.f.email.errors.required)},null)}function L(l){return t.Hb(0,[(l()(),t.pb(0,0,null,null,1,"p",[["class","form-error-message-modal"]],null,null,null,null,null)),(l()(),t.Fb(-1,null,["This field is required."]))],null,null)}function _(l){return t.Hb(0,[(l()(),t.pb(0,0,null,null,3,"ion-text",[["color","danger"]],null,null,null,m.Gb,m.N)),t.ob(1,49152,null,0,e.wb,[t.h,t.k],{color:[0,"color"]},null),(l()(),t.gb(16777216,null,0,1,null,L)),t.ob(3,16384,null,0,h.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],function(l,n){var u=n.component;l(n,1,0,"danger"),l(n,3,0,u.f.avatar.errors.required)},null)}function z(l){return t.Hb(0,[(l()(),t.pb(0,0,null,null,52,"ion-content",[["padding",""]],null,null,null,m.fb,m.m)),t.ob(1,49152,null,0,e.u,[t.h,t.k],null,null),(l()(),t.pb(2,0,null,0,1,"h1",[["text-center",""]],null,null,null,null,null)),(l()(),t.Fb(-1,null,["Edit Account"])),(l()(),t.pb(4,0,null,0,48,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,u){var e=!0;return"submit"===n&&(e=!1!==t.yb(l,6).onSubmit(u)&&e),"reset"===n&&(e=!1!==t.yb(l,6).onReset()&&e),e},null,null)),t.ob(5,16384,null,0,o.p,[],null,null),t.ob(6,540672,null,0,o.d,[[8,null],[8,null]],{form:[0,"form"]},null),t.Cb(2048,null,o.a,null,[o.d]),t.ob(8,16384,null,0,o.j,[[4,o.a]],null,null),(l()(),t.pb(9,0,null,null,13,"ion-item",[["class","form-item"]],null,null,null,m.ob,m.v)),t.ob(10,49152,null,0,e.H,[t.h,t.k],null,null),(l()(),t.pb(11,0,null,0,4,"ion-label",[["position","floating"]],null,null,null,m.pb,m.w)),t.ob(12,49152,null,0,e.N,[t.h,t.k],{position:[0,"position"]},null),(l()(),t.pb(13,0,null,0,1,"ion-icon",[["name","mail"],["slot","start"]],null,null,null,m.lb,m.s)),t.ob(14,49152,null,0,e.C,[t.h,t.k],{name:[0,"name"]},null),(l()(),t.Fb(-1,0,[" Email "])),(l()(),t.pb(16,0,null,0,6,"ion-input",[["formControlName","email"],["type","email"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(l,n,u){var e=!0;return"ionBlur"===n&&(e=!1!==t.yb(l,17)._handleBlurEvent()&&e),"ionChange"===n&&(e=!1!==t.yb(l,17)._handleInputEvent(u.target.value)&&e),e},m.nb,m.u)),t.ob(17,16384,null,0,e.Nb,[t.k],null,null),t.Cb(1024,null,o.g,function(l){return[l]},[e.Nb]),t.ob(19,671744,null,0,o.c,[[3,o.a],[8,null],[8,null],[6,o.g],[2,o.r]],{name:[0,"name"]},null),t.Cb(2048,null,o.h,null,[o.c]),t.ob(21,16384,null,0,o.i,[[4,o.h]],null,null),t.ob(22,49152,null,0,e.G,[t.h,t.k],{type:[0,"type"]},null),(l()(),t.gb(16777216,null,null,1,null,H)),t.ob(24,16384,null,0,h.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.pb(25,0,null,null,13,"ion-item",[["class","form-item"]],null,null,null,m.ob,m.v)),t.ob(26,49152,null,0,e.H,[t.h,t.k],null,null),(l()(),t.pb(27,0,null,0,4,"ion-label",[["position","floating"]],null,null,null,m.pb,m.w)),t.ob(28,49152,null,0,e.N,[t.h,t.k],{position:[0,"position"]},null),(l()(),t.pb(29,0,null,0,1,"ion-icon",[["name","contact"],["slot","start"]],null,null,null,m.lb,m.s)),t.ob(30,49152,null,0,e.C,[t.h,t.k],{name:[0,"name"]},null),(l()(),t.Fb(-1,0,[" Avatar "])),(l()(),t.pb(32,0,null,0,6,"ion-input",[["formControlName","avatar"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionBlur"],[null,"ionChange"]],function(l,n,u){var e=!0;return"ionBlur"===n&&(e=!1!==t.yb(l,33)._handleBlurEvent()&&e),"ionChange"===n&&(e=!1!==t.yb(l,33)._handleInputEvent(u.target.value)&&e),e},m.nb,m.u)),t.ob(33,16384,null,0,e.Nb,[t.k],null,null),t.Cb(1024,null,o.g,function(l){return[l]},[e.Nb]),t.ob(35,671744,null,0,o.c,[[3,o.a],[8,null],[8,null],[6,o.g],[2,o.r]],{name:[0,"name"]},null),t.Cb(2048,null,o.h,null,[o.c]),t.ob(37,16384,null,0,o.i,[[4,o.h]],null,null),t.ob(38,49152,null,0,e.G,[t.h,t.k],{type:[0,"type"]},null),(l()(),t.gb(16777216,null,null,1,null,_)),t.ob(40,16384,null,0,h.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null),(l()(),t.pb(41,0,null,null,11,"ion-grid",[["padding",""]],null,null,null,m.jb,m.q)),t.ob(42,49152,null,0,e.A,[t.h,t.k],null,null),(l()(),t.pb(43,0,null,0,9,"ion-row",[],null,null,null,m.xb,m.E)),t.ob(44,49152,null,0,e.ib,[t.h,t.k],null,null),(l()(),t.pb(45,0,null,0,7,"ion-col",[],null,null,null,m.eb,m.l)),t.ob(46,49152,null,0,e.t,[t.h,t.k],null,null),(l()(),t.pb(47,0,null,0,2,"ion-button",[["class","ion-float-right"],["color","medium"]],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.cancel()&&t),t},m.V,m.c)),t.ob(48,49152,null,0,e.k,[t.h,t.k],{color:[0,"color"]},null),(l()(),t.Fb(-1,0,[" Cancel "])),(l()(),t.pb(50,0,null,0,2,"ion-button",[["class","ion-float-right"],["color","success"]],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==l.component.editAccount()&&t),t},m.V,m.c)),t.ob(51,49152,null,0,e.k,[t.h,t.k],{color:[0,"color"],disabled:[1,"disabled"]},null),(l()(),t.Fb(-1,0,[" Save changes "]))],function(l,n){var u=n.component;l(n,6,0,u.editForm),l(n,12,0,"floating"),l(n,14,0,"mail"),l(n,19,0,"email"),l(n,22,0,"email"),l(n,24,0,u.submitted&&u.f.email.errors),l(n,28,0,"floating"),l(n,30,0,"contact"),l(n,35,0,"avatar"),l(n,38,0,"text"),l(n,40,0,u.submitted&&u.f.avatar.errors),l(n,48,0,"medium"),l(n,51,0,"success",u.editForm.invalid)},function(l,n){l(n,4,0,t.yb(n,8).ngClassUntouched,t.yb(n,8).ngClassTouched,t.yb(n,8).ngClassPristine,t.yb(n,8).ngClassDirty,t.yb(n,8).ngClassValid,t.yb(n,8).ngClassInvalid,t.yb(n,8).ngClassPending),l(n,16,0,t.yb(n,21).ngClassUntouched,t.yb(n,21).ngClassTouched,t.yb(n,21).ngClassPristine,t.yb(n,21).ngClassDirty,t.yb(n,21).ngClassValid,t.yb(n,21).ngClassInvalid,t.yb(n,21).ngClassPending),l(n,32,0,t.yb(n,37).ngClassUntouched,t.yb(n,37).ngClassTouched,t.yb(n,37).ngClassPristine,t.yb(n,37).ngClassDirty,t.yb(n,37).ngClassValid,t.yb(n,37).ngClassInvalid,t.yb(n,37).ngClassPending)})}function P(l){return t.Hb(0,[(l()(),t.pb(0,0,null,null,1,"app-edit-account",[],null,null,null,z,x)),t.ob(1,114688,null,0,c,[o.b,s,e.Fb],null,null)],function(l,n){l(n,1,0)},null)}var N=t.lb("app-edit-account",c,P,{user:"user"},{},[]),E=u("ZYCi");u.d(n,"AccountPageModuleNgFactory",function(){return q});var q=t.mb(d,[],function(l){return t.vb([t.wb(512,t.j,t.bb,[[8,[g.a,j,N]],[3,t.j],t.x]),t.wb(4608,h.l,h.k,[t.u,[2,h.s]]),t.wb(4608,o.q,o.q,[]),t.wb(4608,e.c,e.c,[t.z,t.g]),t.wb(4608,e.Fb,e.Fb,[e.c,t.j,t.q,h.c]),t.wb(4608,e.Jb,e.Jb,[e.c,t.j,t.q,h.c]),t.wb(4608,o.b,o.b,[]),t.wb(4608,s,s,[i.c]),t.wb(1073742336,h.b,h.b,[]),t.wb(1073742336,o.o,o.o,[]),t.wb(1073742336,o.e,o.e,[]),t.wb(1073742336,e.Db,e.Db,[]),t.wb(1073742336,E.p,E.p,[[2,E.v],[2,E.m]]),t.wb(1073742336,o.l,o.l,[]),t.wb(1073742336,d,d,[]),t.wb(1024,E.k,function(){return[[{path:"",component:f}]]},[])])})}}]);